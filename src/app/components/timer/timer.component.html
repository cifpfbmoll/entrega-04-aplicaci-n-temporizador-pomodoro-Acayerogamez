<div class="timer-container" [ngClass]="sessionTypeClass">
  <div class="timer-card">
    <!-- Session Type Display -->
    <div class="session-type" role="status" aria-live="polite">
      <h2>{{ pomodoroService.currentSessionTypeLabel() }}</h2>
    </div>

    <!-- Timer Display -->
    <div class="timer-display" role="timer" aria-label="Tiempo restante">
      <span class="time">{{ pomodoroService.formattedTime() }}</span>
    </div>

    <!-- Progress Bar -->
    <div class="progress-container" role="progressbar" 
         [attr.aria-valuenow]="pomodoroService.progress()" 
         aria-valuemin="0" 
         aria-valuemax="100">
      <div class="progress-bar" [style.width.%]="pomodoroService.progress()"></div>
    </div>

    <!-- Control Buttons -->
    <div class="controls" role="group" aria-label="Controles del temporizador">
      <button 
        class="btn btn-primary"
        (click)="onStartPause()"
        [attr.aria-label]="isRunning ? 'Pausar temporizador' : isPaused ? 'Reanudar temporizador' : 'Iniciar temporizador'"
        [attr.aria-pressed]="isRunning">
        <lucide-angular 
          [img]="isRunning ? PauseIcon : PlayIcon" 
          [size]="24"
          [attr.aria-hidden]="true"></lucide-angular>
        <span>{{ isRunning ? 'Pausar' : isPaused ? 'Reanudar' : 'Iniciar' }}</span>
      </button>

      <button 
        class="btn btn-secondary"
        (click)="onStop()"
        [disabled]="!isRunning && !isPaused"
        aria-label="Detener temporizador">
        <lucide-angular 
          [img]="SquareIcon" 
          [size]="20"
          aria-hidden="true"></lucide-angular>
        <span>Detener</span>
      </button>

      <button 
        class="btn btn-secondary"
        (click)="onSkip()"
        aria-label="Saltar a la siguiente sesiÃ³n">
        <lucide-angular 
          [img]="SkipForwardIcon" 
          [size]="20"
          aria-hidden="true"></lucide-angular>
        <span>Saltar</span>
      </button>

      <button 
        class="btn btn-ghost"
        (click)="onReset()"
        aria-label="Reiniciar todo">
        <lucide-angular 
          [img]="RefreshCwIcon" 
          [size]="20"
          aria-hidden="true"></lucide-angular>
        <span>Reiniciar</span>
      </button>
    </div>

    <!-- Session Counter -->
    <div class="session-counter" role="status" aria-live="polite">
      <span class="counter-label">Sesiones completadas:</span>
      <span class="counter-value">{{ pomodoroService.state().completedSessions }}</span>
    </div>
  </div>
</div>
